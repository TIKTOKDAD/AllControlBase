# controller_params.yaml
# ROS 层基础配置 (话题、时钟)
#
# =============================================================================
# 文件职责
# =============================================================================
#
# 本文件定义 ROS 层特有的基础配置：
# - topics: ROS 话题名称 (默认值)
# - clock: 时钟跳变检测参数
#
# 算法参数 (MPC、约束、安全等) 在平台配置文件中定义。
# 内部实现参数在 internal_params.yaml 中定义。
#
# =============================================================================
# 配置加载顺序 (从低到高)
# =============================================================================
#
# 1. universal_controller/config/*.py  - Python 默认配置 (安全网)
# 2. 本文件                             - ROS 层基础配置
# 3. base/internal_params.yaml          - 内部实现参数 (用户不应修改)
# 4. platforms/{platform}.yaml          - 平台特定配置 (用户可调参数)
# 5. ROS 参数服务器                     - 运行时覆盖
#
# =============================================================================
# 配置文件架构
# =============================================================================
#
# controller_ros/config/
# ├── base/
# │   ├── controller_params.yaml    # 本文件: ROS 层基础配置
# │   └── internal_params.yaml      # 内部实现参数 (用户不应修改)
# ├── platforms/
# │   ├── _template.yaml            # 用户配置模板
# │   └── *.yaml                    # 平台配置 (用户可调参数)
# └── tools/
#     └── visualizer_params.yaml    # 可视化工具配置
#

# =============================================================================
# 话题配置 - ROS 层特有
#
# 命名规范:
# - 输入话题: /controller/input/<name>
# - 输出话题: /controller/<name>
# - 空字符串 "" 表示禁用该话题
#
# 平台配置可以覆盖这些默认值
# =============================================================================
topics:
  # 输入话题
  odom: "/controller/input/odom"
  imu: ""                                     # 默认禁用，平台配置中启用
  trajectory: "/controller/input/trajectory"
  emergency_stop: "/controller/emergency_stop"
  
  # 输出话题
  cmd_unified: "/controller/cmd"
  diagnostics: "/controller/diagnostics"
  state: "/controller/state"
  debug_path: "/controller/debug_path"
  attitude_cmd: "/controller/attitude_cmd"    # 仅四旋翼平台

# =============================================================================
# 时钟配置 - 时钟跳变检测参数
#
# 用于检测仿真时间跳变或系统时钟异常。
# 大多数场景使用默认值即可，仅在特殊需求时修改。
# =============================================================================
clock:
  jitter_tolerance: 0.001         # 时钟抖动容忍度 (秒)，小于此值的跳变被忽略
  jump_threshold: 1.0             # 时钟大幅跳变阈值 (秒)，超过此值触发警告
  max_events: 10                  # 最多保留的时钟跳变事件数

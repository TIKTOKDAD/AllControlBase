# 统一诊断日志 - 2025-12-29 15:08:44


======================================================================
  统一诊断工具 v2.1 - 系统调优模式
======================================================================

阶段1: 话题监控 (300.0秒)

  [提示] 此阶段仅被动监听话题，如需测试底盘能力请使用 --test-chassis
  [OK] 订阅 /odom
  [OK] 订阅 /imu
  [OK] 订阅 /nn/local_trajectory

  收集数据 300.0 秒...

阶段3: 控制器运行时诊断 (300.0秒)

  [OK] 订阅 /controller/diagnostics

  收集控制器诊断 300.0 秒...
  [INFO] 移动机器人以生成跟踪数据!
  [OK] 收集 886 条诊断消息

阶段4: 计算推荐配置


======================================================================
  诊断结果
======================================================================

传感器状态:
  [OK] odom: 50.0 Hz, 延迟: 0.5ms, 抖动: 2.1ms
  [NO DATA] imu: 0.0 Hz, 延迟: 0.0ms, 抖动: 0.0ms
  [OK] trajectory: 2.7 Hz, 延迟: 0.5ms, 抖动: 367.0ms

轨迹特性:
  点数: 8
  时间步长: 0.10000000149011612 sec
  包含速度: 否
  坐标系: base_link
  长度: 9.51 m
  最大曲率: 0.03 1/m

底盘特性 (阶段1被动监听，仅供参考):
  最大速度: 0.48 m/s
  最大vx: 0.48 m/s
  最大wz: 1.89 rad/s
  最大加速度: 3.69 m/s^2
  最大角加速度: 23.79 rad/s^2

推荐参数:
  控制频率: 40 Hz
  MPC horizon: 7
  MPC dt: 0.10000000149011612 sec
  v_max: 0.38 m/s
  omega_max: 1.51 rad/s
  a_max: 2.95 m/s^2
  Odom timeout: 59 ms
  Traj timeout: 751 ms
  Lookahead: 0.3 m

优化建议:
  [OK] 里程计频率良好，支持高频控制
  [WARN] 轨迹无速度信息，alpha检查禁用

控制器运行时统计:
  MPC求解时间: 1.69ms avg, 13.04ms max
  MPC成功率: 100.0%
  备用控制器使用率: 0.0%
  横向误差: 9.9cm avg, 33.8cm max
  航向误差: 6.9° avg
  Alpha (一致性): 1.00 avg, 1.00 min

运行时调优建议:
  [OK] MPC求解时间良好 (1.7ms < 7.5ms)
  [OK] MPC成功率良好 (100%)
  [OK] 横向跟踪误差可接受

生成配置文件: /home/oamr/moshi/runtime_tuned_config.yaml
  [OK] 配置已保存到: /home/oamr/moshi/runtime_tuned_config.yaml

使用方法:
  roslaunch controller_ros controller.launch config:=$(pwd)//home/oamr/moshi/runtime_tuned_config.yaml

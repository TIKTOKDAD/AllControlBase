# 统一诊断日志 - 2025-12-29 15:06:55


======================================================================
  统一诊断工具 v2.1 - 系统调优模式
======================================================================

阶段1: 话题监控 (5.0秒)

  [提示] 此阶段仅被动监听话题，如需测试底盘能力请使用 --test-chassis
  [OK] 订阅 /odom
  [OK] 订阅 /imu
  [OK] 订阅 /nn/local_trajectory

  收集数据 5.0 秒...

阶段2: 底盘能力测试

  警告: 机器人会移动! 确保周围空间安全。
  [OK] 重新订阅 /odom
  等待里程计数据...

阶段4: 计算推荐配置


======================================================================
  诊断结果
======================================================================

传感器状态:
  [OK] odom: 49.9 Hz, 延迟: 0.5ms, 抖动: 0.6ms
  [NO DATA] imu: 0.0 Hz, 延迟: 0.0ms, 抖动: 0.0ms
  [NO DATA] trajectory: 0.0 Hz, 延迟: 0.0ms, 抖动: 0.0ms

轨迹特性:
  点数: 0
  时间步长: 0.1 sec
  包含速度: 否
  坐标系: 
  长度: 0.00 m
  最大曲率: 0.00 1/m

底盘特性 (阶段1被动监听，仅供参考):
  [提示] 监听期间机器人未移动，数据为0是正常的
  最大速度: 0.00 m/s
  最大vx: 0.00 m/s
  最大wz: 0.00 rad/s
  最大加速度: 0.00 m/s^2
  最大角加速度: 0.00 rad/s^2

底盘测试结果 (阶段2主动测试，真实能力):
  实测最大速度: 0.46 m/s
  实测最大加速度: 12.06 m/s^2
  实测最大角速度: 0.74 rad/s
  响应时间: 0.162 sec
  [提示] 配置生成将优先使用测试结果

推荐参数:
  控制频率: 20 Hz
  MPC horizon: 3
  MPC dt: 0.1 sec
  v_max: 0.37 m/s
  omega_max: 0.59 rad/s
  a_max: 9.65 m/s^2
  Odom timeout: 60 ms
  Traj timeout: 1000 ms
  Lookahead: 0.3 m

优化建议:
  [WARN] 里程计频率较低，控制频率受限
  [WARN] 轨迹点数少，MPC预测受限
  [WARN] 轨迹无速度信息，alpha检查禁用

生成配置文件: /home/oamr/moshi/day2_chassis.yaml
  [OK] 配置已保存到: /home/oamr/moshi/day2_chassis.yaml

使用方法:
  roslaunch controller_ros controller.launch config:=$(pwd)//home/oamr/moshi/day2_chassis.yaml
